---
import { Icon } from 'astro-icon/components';

const navigation = [
  { name: 'Home', href: 'https://www.jyotirsetu.com' },
  { name: 'About', href: 'https://www.jyotirsetu.com/about' },
  { name: 'Services', href: 'https://www.jyotirsetu.com/#services' },
  { name: 'Blog', href: '/', current: true },
  { name: 'Testimonials', href: 'https://www.jyotirsetu.com/testimonials' },
  { name: 'Contact', href: 'https://www.jyotirsetu.com/contact' },
];

const blogCategories = [
  { name: 'Weekly Horoscopes', href: '/horoscopes' },
  { name: 'Vedic Astrology', href: '/vedic-astrology' },
  { name: 'Palmistry', href: '/palmistry' },
  { name: 'Numerology', href: '/numerology' },
  { name: 'Spiritual Guidance', href: '/spiritual-guidance' },
  { name: 'Success Stories', href: '/success-stories' },
];
---

<header class="bg-white dark:bg-gray-900 shadow-lg border-b border-blue-100 dark:border-gray-700">
  <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8" aria-label="Top">
    <div class="flex justify-between items-center py-4">
      <!-- Logo and Brand -->
      <div class="flex items-center">
        <a href="https://www.jyotirsetu.com" class="flex items-center space-x-3">
          <div class="relative">
            <img 
              src="https://www.jyotirsetu.com/JyotirSetu%20Full%20Logo%20Transparent.png" 
              alt="JyotirSetu Logo" 
              class="h-12 w-auto"
            />
            <div class="absolute -top-1 -right-1 w-3 h-3 bg-blue-500 rounded-full animate-pulse"></div>
          </div>
          <div class="hidden sm:block">
            <h1 class="text-xl font-bold text-gray-900 dark:text-white">JyotirSetu</h1>
            <p class="text-sm text-blue-600 dark:text-blue-400">Cosmic Insights Blog</p>
          </div>
        </a>
      </div>

      <!-- Desktop Navigation -->
      <div class="hidden lg:flex lg:items-center lg:space-x-8">
        {navigation.map((item) => (
          <a
            href={item.href}
            class={`text-sm font-medium transition-colors duration-200 ${
              item.current 
                ? 'text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 pb-1' 
                : 'text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400'
            }`}
          >
            {item.name}
          </a>
        ))}
        
        <!-- Blog Categories Dropdown -->
        <div class="relative group">
          <button class="flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200">
            Categories
            <Icon name="tabler:chevron-down" class="ml-1 h-4 w-4" />
          </button>
          <div class="absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
            <div class="py-1">
              {blogCategories.map((category) => (
                <a
                  href={category.href}
                  class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200"
                >
                  {category.name}
                </a>
              ))}
            </div>
          </div>
        </div>

        <!-- Book Appointment Button -->
        <a
          href="https://www.jyotirsetu.com/ScheduleAppointmentJyotirSetu"
          data-appointment-btn
          class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-full text-white bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"
        >
          <Icon name="tabler:calendar" class="mr-2 h-4 w-4" />
          Book Appointment
        </a>
      </div>

      <!-- Mobile menu button -->
      <div class="lg:hidden">
        <button
          type="button"
          class="mobile-menu-button bg-white dark:bg-gray-800 p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500"
          aria-expanded="false"
        >
          <span class="sr-only">Open main menu</span>
          <Icon name="tabler:menu-2" class="h-6 w-6" />
        </button>
      </div>
    </div>

    <!-- Mobile Navigation Menu -->
    <div class="mobile-menu hidden lg:hidden border-t border-gray-200 dark:border-gray-700">
      <div class="px-2 pt-2 pb-3 space-y-1">
        {navigation.map((item) => (
          <a
            href={item.href}
            class={`block px-3 py-2 text-base font-medium rounded-md transition-colors duration-200 ${
              item.current 
                ? 'text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-gray-800' 
                : 'text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-gray-50 dark:hover:bg-gray-800'
            }`}
          >
            {item.name}
          </a>
        ))}
        
        <!-- Mobile Blog Categories -->
        <div class="px-3 py-2">
          <p class="text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider">Blog Categories</p>
          <div class="mt-2 space-y-1">
            {blogCategories.map((category) => (
              <a
                href={category.href}
                class="block px-3 py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md transition-colors duration-200"
              >
                {category.name}
              </a>
            ))}
          </div>
        </div>

        <!-- Mobile Book Appointment Button -->
        <div class="px-3 py-2">
          <a
            href="https://www.jyotirsetu.com/ScheduleAppointmentJyotirSetu"
            data-appointment-btn
            class="block w-full text-center px-4 py-2 border border-transparent text-sm font-medium rounded-full text-white bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200"
          >
            <Icon name="tabler:calendar" class="inline mr-2 h-4 w-4" />
            Book Appointment
          </a>
        </div>
      </div>
    </div>
  </nav>
</header>

<!-- Mobile Menu Toggle Script -->
<script is:inline>
  document.addEventListener('DOMContentLoaded', function() {
    const mobileMenuButton = document.querySelector('.mobile-menu-button');
    const mobileMenu = document.querySelector('.mobile-menu');
    
    if (mobileMenuButton && mobileMenu) {
      mobileMenuButton.addEventListener('click', function() {
        const isExpanded = this.getAttribute('aria-expanded') === 'true';
        this.setAttribute('aria-expanded', !isExpanded);
        mobileMenu.classList.toggle('hidden');
      });
    }
  });
</script>
